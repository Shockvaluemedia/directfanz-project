[databases]
; Database connection configuration
; Format: dbname = host=hostname port=port dbname=database user=username password=password
direct_fan_platform = host=${DATABASES_HOST} port=${DATABASES_PORT} dbname=${DATABASES_DBNAME} user=${DATABASES_USER} password=${DATABASES_PASSWORD}

[pgbouncer]
; Connection pooling configuration
listen_addr = 0.0.0.0
listen_port = 5432
auth_type = md5
auth_file = /etc/pgbouncer/userlist.txt

; Pool configuration
pool_mode = ${POOL_MODE}
max_client_conn = ${MAX_CLIENT_CONN}
default_pool_size = ${DEFAULT_POOL_SIZE}
min_pool_size = ${MIN_POOL_SIZE}
reserve_pool_size = ${RESERVE_POOL_SIZE}

; Connection limits and timeouts
server_lifetime = ${SERVER_LIFETIME}
server_idle_timeout = ${SERVER_IDLE_TIMEOUT}
server_connect_timeout = 15
server_login_retry = 15
client_login_timeout = 60
autodb_idle_timeout = 3600

; Logging configuration
log_connections = 1
log_disconnections = 1
log_pooler_errors = 1
stats_period = 60

; Security settings
ignore_startup_parameters = extra_float_digits

; Performance tuning
tcp_keepalives_idle = 600
tcp_keepalives_interval = 30
tcp_keepalives_count = 3

; Administrative settings
admin_users = postgres
stats_users = postgres

; DNS settings
dns_max_ttl = 15
dns_nxdomain_ttl = 15
dns_zone_check_period = 0